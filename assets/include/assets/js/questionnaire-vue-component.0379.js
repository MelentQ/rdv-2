(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{167:function(s,t,e){"use strict";e.r(t);var i=e(172).a,n=e(171),a=Object(n.a)(i,(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"modal-form"},[e("div",{staticClass:"form"},[e("div",{staticClass:"modal-form__content"},[e("h1",{staticClass:"t-base t-base--size--h1 t-base--color--blue-dark"},[s._v("Анкета")]),s.success?s._e():e("div",{staticClass:"modal-form__request"},[e("div",{staticClass:"t-base t-base--size--small t-base--weight--bold t-base--color--blue-main"},[s._v("Ответьте, пожалуйста, на несколько вопросов")])]),e("div",{staticClass:"t-base t-base--size--medium t-base--weight--bold"},[s._v(s._s(s.success?s.recording?"Ваша заявка успешно отправлена":"Спасибо за регистрацию и заполнение анкеты!":s.questions[s.activeQuestion].name))]),s.success&&s.recording?e("div",{staticClass:"form__wrapper"},[s._m(0)]):s.success?e("div",{staticClass:"form__wrapper"},[e("div",{staticClass:"form__control"},[s._v(s._s("На вашу почту "+s.email+" будут отправлены данные для входа на вебинар."))]),s._m(1)]):e("div",{staticClass:"form__wrapper",class:{"form__wrapper--column--2":s.answers.length>6}},s._l(s.answers,(function(t){return e("div",{key:t.id,staticClass:"form__control"},[e("label",{class:s.isMultiple?"checkbox input-checkbox":"input-radio"},["checkbox"==(s.isMultiple?"checkbox":"radio")?e("input",{directives:[{name:"model",rawName:"v-model",value:s.asking[s.activeQuestion].AnswerId,expression:"asking[activeQuestion].AnswerId"}],class:s.isMultiple?"checkbox__control":"input-radio__control",attrs:{name:s.questions[s.activeQuestion].id,type:"checkbox"},domProps:{value:t.id,checked:Array.isArray(s.asking[s.activeQuestion].AnswerId)?s._i(s.asking[s.activeQuestion].AnswerId,t.id)>-1:s.asking[s.activeQuestion].AnswerId},on:{change:function(e){var i=s.asking[s.activeQuestion].AnswerId,n=e.target,a=!!n.checked;if(Array.isArray(i)){var o=t.id,r=s._i(i,o);n.checked?r<0&&s.$set(s.asking[s.activeQuestion],"AnswerId",i.concat([o])):r>-1&&s.$set(s.asking[s.activeQuestion],"AnswerId",i.slice(0,r).concat(i.slice(r+1)))}else s.$set(s.asking[s.activeQuestion],"AnswerId",a)}}}):"radio"==(s.isMultiple?"checkbox":"radio")?e("input",{directives:[{name:"model",rawName:"v-model",value:s.asking[s.activeQuestion].AnswerId,expression:"asking[activeQuestion].AnswerId"}],class:s.isMultiple?"checkbox__control":"input-radio__control",attrs:{name:s.questions[s.activeQuestion].id,type:"radio"},domProps:{value:t.id,checked:s._q(s.asking[s.activeQuestion].AnswerId,t.id)},on:{change:function(e){return s.$set(s.asking[s.activeQuestion],"AnswerId",t.id)}}}):e("input",{directives:[{name:"model",rawName:"v-model",value:s.asking[s.activeQuestion].AnswerId,expression:"asking[activeQuestion].AnswerId"}],class:s.isMultiple?"checkbox__control":"input-radio__control",attrs:{name:s.questions[s.activeQuestion].id,type:s.isMultiple?"checkbox":"radio"},domProps:{value:t.id,value:s.asking[s.activeQuestion].AnswerId},on:{input:function(t){t.target.composing||s.$set(s.asking[s.activeQuestion],"AnswerId",t.target.value)}}}),s.isMultiple?e("div",{staticClass:"checkbox__icon"},[e("svg",{staticClass:"icon-modern icon-modern--check icon-modern--color--white"},[e("use",{attrs:{"xlink:href":"/assets/include/assets/img/sprite.svg#check-usage"}})])]):s._e(),e("span",{class:s.isMultiple?"input-radio__text":"checkbox__text"},[s._v(s._s(t.name))])])])})),0),e("div",{staticClass:"modal-form__btn",class:s.sending&&"is-loading"},[e("button",{staticClass:"button-modern",class:s.success&&"final-step-button",attrs:{disabled:!s.asking[s.activeQuestion].AnswerId.length||s.sending},on:{click:function(t){t.preventDefault(),s.success?s.$emit("close-modal"):s.clickBtnHandler()}}},[e("span",{staticClass:"button-modern__wrapper"},[e("span",{staticClass:"button-modern__text"},[s._v(s._s(this.activeQuestion+1!=this.questions.length?"Далее":s.success?"Закрыть":"Завершить"))])])])])])]),s.success?s._e():e("div",{staticClass:"modal-form__progress-path"},[e("div",{staticClass:"modal-form__progress-bar",style:"width:"+s.progressPercent+"%"})])])}),[function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"form__control"},[this._v("Мы отправили видеозапись на указанную почту. Если вы не получили письмо в течение 15 минут, проверьте, пожалуйста, папку «Спам» или напишите нам на почту:"),t("a",{staticClass:"link link--color--blue link--text--medium",attrs:{href:"mailto:academy@rdv-it.ru"}},[this._v("academy@rdv-it.ru")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"form__control"},[this._v("Если вы не получили письмо, проверьте, пожалуйста, папку «Спам». Если письма нет ни в одной из папок, пожалуйста, повторите регистрацию с другим email-адресом или напишите нам на почту"),t("a",{staticClass:"link link--color--blue link--text--medium",staticStyle:{display:"inline"},attrs:{href:"mailto:academy@rdv-it.ru"}},[this._v(" academy@rdv-it.ru")])])}],!1,null,null,null);t.default=a.exports},171:function(s,t,e){"use strict";function i(s,t,e,i,n,a,o,r){var c,l="function"==typeof s?s.options:s;if(t&&(l.render=t,l.staticRenderFns=e,l._compiled=!0),i&&(l.functional=!0),a&&(l._scopeId="data-v-"+a),o?(c=function(s){(s=s||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(s=__VUE_SSR_CONTEXT__),n&&n.call(this,s),s&&s._registeredComponents&&s._registeredComponents.add(o)},l._ssrRegister=c):n&&(c=r?function(){n.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:n),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(s,t){return c.call(t),u(s,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:s,options:l}}e.d(t,"a",(function(){return i}))},172:function(s,t,e){"use strict";(function(s){var i=e(75),n=e.n(i);t.a={props:{initialData:Object},data:()=>({activeQuestion:0,asking:null,success:!1,email:"",recording:"",sending:!1}),computed:{questions(){if(this.initialData)return this.initialData.question.sort((s,t)=>s.position-t.position)},answers(){if(this.questions)return this.questions[this.activeQuestion].answers.sort((s,t)=>s.position-t.position)},isMultiple(){if(this.questions)return this.questions[this.activeQuestion].isMultiple},progressPercent(){if(this.questions)return 100/this.questions.length*(this.activeQuestion+1)},askingFormatForRequest(){let s=[];return this.asking.forEach(t=>{Array.isArray(t.AnswerId)?t.AnswerId.forEach(e=>{s.push({QuestionId:t.QuestionId,AnswerId:e})}):s.push(t)}),s},nextQuestion(){let s,t=this.asking[this.activeQuestion].AnswerId;return t&&!Array.isArray(t)&&this.answers.forEach(e=>{e.id===t&&(s=e.nextQuestion)}),t&&!Array.isArray(t)||"00000000-0000-0000-0000-000000000000"==s||(s=this.questions[this.activeQuestion].nextQuestion),s}},methods:{createAskingData(){this.questions&&(this.asking=this.questions.map(s=>({QuestionId:s.id,AnswerId:[]})))},clickBtnHandler(){this.questions[this.activeQuestion].isLast?this.request():this.nextQuestion&&(this.activeQuestion=this.questions.findIndex(s=>s.id==this.nextQuestion))},request(){this.sending=!0,n()({method:"POST",url:this.initialData.ActionURL,data:s.param({questionnaire:"completed",idEvent:this.initialData.idEvent,dataToCrm:this.initialData.dataToCrm,asking:this.askingFormatForRequest,recording:this.initialData.recording})}).then(s=>{s.data.success&&s.data.email&&(this.email=s.data.email,s.data.recording&&(this.recording=s.data.recording),this.success=!0)}).catch(s=>{console.log(s)}).finally(()=>{this.sending=!1})}},created(){this.createAskingData()}}}).call(this,e(1))}}]);